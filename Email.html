<html><head><title>Nile::Plugin::Email</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.28,
  using Pod::Simple::PullParser v3.28,
  under Perl v5.016003 at Thu Aug 14 06:32:42 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u'
name="NAME"
>NAME</a></h1>

<p>Nile::Plugin::Email - Email plugin for the Nile framework.</p>

<h1><a class='u'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>        $email = $me-&#62;plugin-&#62;email;
        # or create new object
        #$email = $me-&#62;plugin-&#62;email-&#62;new;

        $email-&#62;email({
                from    =&#62; &#39;ahmed@mewsoft.com&#39;,
                to      =&#62; &#39;ramy@domain.com&#39;,
                subject =&#62; &#39;Happy birthday Ramy&#39;,
                body    =&#62; &#39;Hello Ramy, Happy new year Ramy&#39;,
                type    =&#62; &#39;html&#39;, # &#39;html&#39; or &#39;text&#39; message type
                attach  =&#62; &#39;/path/to/attachment&#39;, # optional attachment file
        });</pre>

<h1><a class='u'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Nile::Plugin::Email - Email plugin for the Nile framework.</p>

<p>This plugin build on the top of <a href="http://search.cpan.org/perldoc?Email%3A%3ASender%3A%3ASimple" class="podlinkpod"
>Email::Sender::Simple</a> module which supports any transporter like <a href="http://search.cpan.org/perldoc?Email%3A%3ASender%3A%3ATransport%3A%3ASendmail" class="podlinkpod"
>Sendmail</a>, <a href="http://search.cpan.org/perldoc?Email%3A%3ASender%3A%3ATransport%3A%3ASMTP" class="podlinkpod"
>SMTP</a> etc.</p>

<p>Plugin configuration can be set in the config file under the plugin section.</p>

<p>Example plugin configuration for <code>SMTP</code> transporter:</p>

<pre>        &#60;plugin&#62;

                &#60;email&#62;
                        &#60;transport&#62;SMTP&#60;/transport&#62;
                        &#60;host&#62;localhost&#60;/host&#62;
                        &#60;ssl&#62;0&#60;/ssl&#62;
                        &#60;port&#62;25&#60;/port&#62;
                        &#60;timeout&#62;120&#60;/timeout&#62;
                        &#60;sasl_username&#62;&#60;/sasl_username&#62;
                        &#60;sasl_password&#62;0&#60;/sasl_password&#62;
                        &#60;allow_partial_success&#62;0&#60;/allow_partial_success&#62;
                        &#60;helo&#62;Hello from loclahost&#60;/helo&#62;
                        &#60;localaddr&#62;localhost&#60;/localaddr&#62;
                        &#60;localport&#62;1234&#60;/localport&#62;
                &#60;/email&#62;

        &#60;/plugin&#62;</pre>

<p>Example plugin configuration for <code>Sendmail</code> transporter:</p>

<pre>        &#60;plugin&#62;

                &#60;email&#62;
                        &#60;transport&#62;Sendmail&#60;/transport&#62;
                        &#60;sendmail&#62;/usr/sbin/sendmail&#60;/sendmail&#62;
                &#60;/email&#62;

        &#60;/plugin&#62;</pre>

<p>If no configuration found, the module will search for Sendmail program and use it, if not found it will try to connect to local SMTP server.</p>

<p>You also can set the transporter programmatically using the method <a href="#transport" class="podlinkpod"
>&#34;transport&#34;</a> below.</p>

<h2><a class='u'
name="email()"
>email()</a></h2>

<p>Send email with optional attachments quickly:</p>

<pre>        $email-&#62;email({
                from    =&#62; &#39;ahmed@mewsoft.com&#39;,
                to      =&#62; &#39;ramy@domain.com&#39;,
                subject =&#62; &#39;Happy birthday Ramy&#39;,
                body    =&#62; &#39;Hello Ramy, Happy new year Ramy&#39;,
                type    =&#62; &#39;html&#39;, # &#39;html&#39; or &#39;text&#39; message type, default &#39;html&#39;
                attach  =&#62; &#39;/path/to/attachment&#39;,       # optional attachment file
        });</pre>

<p>Send email with many options:</p>

<pre>        $email-&#62;email({

                from            =&#62; &#39;ahmed@mewsoft.com&#39;,
                to              =&#62; &#39;ramy@ramys.net&#39;,

                cc              =&#62; [&#39;x@y.com&#39;, &#39;a@b.com&#39;, &#39;b@d.com&#39;],
                bcc             =&#62; [&#39;c@x.com&#39;, &#39;e@z.com&#39;, &#39;r@j.com&#39;],

                subject =&#62; &#39;Happy birthday Ramy&#39;,
                
                # optional headers
                sender          =&#62; &#39;support@mewsoft.com&#39;, # set to the &#39;from&#39; if not set
                #&#39;Return-Path&#39;  =&#62;      &#39;&#39;, # set to the &#39;from&#39; if not set
                #&#39;Reply-To&#39;     =&#62;      &#39;&#39;, # set to the &#39;from&#39; if not set
                #&#39;X-Mailer&#39;     =&#62;      &#39;Nile&#39;,
                #&#39;X-Priority&#39;   =&#62;      3, # highest =&#62; 1, high =&#62; 2, normal =&#62; 3, low =&#62; 4, lowest =&#62; 5
                #Date           =&#62;      email_date(), # automatically set to current date and time
                #Comments       =&#62;      &#39;&#39;,
                #Encrypted      =&#62;      &#39;&#39;,
                #References     =&#62;      &#39;&#39;,
                #&#39;Message-ID&#39;   =&#62;      &#39;&#39;,
                #&#39;MIME-Version&#39; =&#62;      &#39;&#39;,
                #Organization   =&#62;      &#39;Mewsoft&#39;,
                
                #multipart      =&#62; &#39;related&#39;,

                type            =&#62; &#39;html&#39;, # &#39;html&#39; or &#39;text&#39; message type, default &#39;html&#39;

                # optional raw headers overried above and used as is
                header          =&#62; {
                        &#34;X-Mailer&#34;          =&#62; &#39;&#39;,
                        &#34;X-Accept-Language&#34; =&#62; &#39;en&#39;,
                },
                
                # attachments
                attach          =&#62; [
                        &#39;/path/to/attachment1&#39;, 
                        &#39;/path/to/attachment2&#39;,
                        &#39;/path/to/attachment3&#39;,
                        {
                                Path =&#62; &#34;/path/to/attachment4&#34;,
                                # Mime::Entity options.
                                Id =&#62; &#34;...&#34;,
                        }
                ],
        });</pre>

<p>Set the email components one by one for more control:</p>

<pre>        $email-&#62;from(&#39;ahmed@mewsoft.com&#39;);
        $email-&#62;to(&#39;x@domain.com&#39;);
        $email-&#62;cc([&#39;a@b.com&#39;, &#39;b@c.com&#39;]);
        $email-&#62;bcc([&#39;d@e.com&#39;, &#39;e@f.com&#39;]);
        $email-&#62;sender(&#39;company@mewsoft.com&#39;);
        $email-&#62;type(&#39;text&#39;);
        $email-&#62;mailer(&#39;Nile&#39;);
        $email-&#62;subject(&#39;Happy birthday&#39;);
        $email-&#62;body(&#39;Hello Ramy, Happy new year&#39;);
        
        # send the email
        $email-&#62;send();</pre>

<h2><a class='u'
name="from()"
>from()</a></h2>

<pre>        $email-&#62;from(&#39;ahmed@mewsoft.com&#39;);
        $from = $email-&#62;from;</pre>

<p>Sets or returns the <code>from</code> email address.</p>

<h2><a class='u'
name="to()"
>to()</a></h2>

<pre>        $email-&#62;to(&#39;ahmed@mewsoft.com&#39;);
        $to = $email-&#62;to;</pre>

<p>Sets or returns the <code>to</code> email address.</p>

<h2><a class='u'
name="sender()"
>sender()</a></h2>

<pre>        # if not set, the from address will be used
        $email-&#62;sender(&#39;support@mewsoft.com&#39;);
        $sender = $email-&#62;sender;</pre>

<p>Sets or returns the <code>sender</code> email address.</p>

<h2><a class='u'
name="cc()"
>cc()</a></h2>

<pre>        $email-&#62;cc(&#39;x@mewsoft.com&#39;, &#39;y@mewsoft.com&#39;);
        @cc = $email-&#62;cc;</pre>

<p>Sets or returns the <code>cc</code> email addresses.</p>

<h2><a class='u'
name="bcc()"
>bcc()</a></h2>

<pre>        $email-&#62;bcc(&#39;x@mewsoft.com&#39;, &#39;y@mewsoft.com&#39;);
        @bcc= $email-&#62;bcc;</pre>

<p>Sets or returns the <code>bcc</code> email addresses.</p>

<h2><a class='u'
name="subject()"
>subject()</a></h2>

<pre>        $email-&#62;subject($subject);
        $subject = $email-&#62;subject;</pre>

<p>Sets or returns the <code>subject</code>.</p>

<h2><a class='u'
name="body()"
>body()</a></h2>

<pre>        $email-&#62;body($body);
        $body = $email-&#62;body;</pre>

<p>Sets or returns the <code>body</code>.</p>

<h2><a class='u'
name="encoding()"
>encoding()</a></h2>

<pre>        # default is &#39;quoted-printable&#39;
        $email-&#62;encoding($encoding);
        $encoding = $email-&#62;encoding;</pre>

<p>Sets or returns the <code>encoding</code>.</p>

<h2><a class='u'
name="format()"
>format()</a></h2>

<pre>        # $format = &#39;flowed&#39;;
        $email-&#62;format($format);
        $format = $email-&#62;format;</pre>

<p>Sets or returns the <code>format</code>.</p>

<h2><a class='u'
name="charset()"
>charset()</a></h2>

<pre>        # default $charset = &#34;UTF-8&#34;;
        $email-&#62;charset($charset);
        $charset = $email-&#62;charset;</pre>

<p>Sets or returns the <code>charset</code>.</p>

<h2><a class='u'
name="multipart()"
>multipart()</a></h2>

<pre>        # default is &#34;mixed&#34; for &#34;multipart/mixed&#34;
        $email-&#62;multipart(&#34;mixed&#34;);
        $multipart = $email-&#62;multipart;</pre>

<p>Sets or returns the <code>multipart</code>.</p>

<h2><a class='u'
name="header()"
>header()</a></h2>

<pre>        $email-&#62;header-&#62;{$name} = $value;
        $value = $email-&#62;header-&#62;{$name};</pre>

<p>Sets or returns the <code>header</code> entries.</p>

<h2><a class='u'
name="type()"
>type()</a></h2>

<pre>        # html email message
        $email-&#62;type(&#34;html&#34;);
        
        # text/plain email message
        $email-&#62;type(&#34;text&#34;);</pre>

<p>Sets or returns the message content type.</p>

<h2><a class='u'
name="mailer()"
>mailer()</a></h2>

<pre>        $email-&#62;mailer(&#34;Nile&#34;);</pre>

<p>Sets or returns the header <code>X-Mailer</code>.</p>

<h2><a class='u'
name="attach()"
>attach()</a></h2>

<pre>        $email-&#62;attach(&#39;/path/to/attachment1&#39;);
        $email-&#62;attach(&#39;/path/to/attachment2&#39;);

        $email-&#62;attach(
                &#39;/path/to/attachment1&#39;,
                &#39;/path/to/attachment2&#39;,
                &#39;/path/to/attachment3&#39;,
                {
                        Path =&#62; &#34;/path/to/attachment4&#34;,
                        # Mime::Entity options
                        Id =&#62; &#34;...&#34;,
                }
        );</pre>

<p>Attach files to the email message.</p>

<h2><a class='u'
name="transport()"
>transport()</a></h2>

<pre>        $email-&#62;transport($transport, %options);
        
        # set transport to Sendmail program, path auto detected
        $email-&#62;transport(&#39;Sendmail&#39;);

        # set transport to Sendmail program, specify path to it
        $email-&#62;transport(&#39;Sendmail&#39;, { sendmail =&#62; &#39;/usr/sbin/sendmail&#39; });
        
        # set transport to SMTP with options
        $email-&#62;transport(&#34;SMTP&#34;, {
                host =&#62; &#39;mail.mewsoft.com&#39;, # the name of the host to connect to; defaults to localhost
                ssl =&#62; 0, # if true, connect via SSL; defaults to false
                port =&#62; 25, # port to connect to; defaults to 25 for non-SSL, 465 for SSL
                timeout =&#62; 180, # maximum time in secs to wait for server; default is 120
                sasl_username =&#62; &#39;&#39;, # the username to use for auth; optional
                sasl_password =&#62; &#39;&#39;, # the password to use for auth; required if username is provided
                allow_partial_success =&#62; 0, # if true, will send data even if some recipients were rejected; defaults to false
                helo =&#62; &#39;mail.mewsoft.com&#39;, # what to say when saying HELO; no default
                #localaddr =&#62; &#39;localhost&#39;, # local address from which to connect
                #localport =&#62;&#39;1234&#39;, # local port from which to connect
        });
        
        # custom transport
        #$transport = MyTransport-&#62;new();
        $email-&#62;transport($transport, %options);</pre>

<p>Set the email transporter class. Can be <code>Email::Sender::Transport</code> subclass name like <code>Sendmail</code>, <code>SMTP</code>, etc or <code>Email::Sender::Transport</code> type object.</p>

<p>To find available transporters, search cpan for <a href="http://search.cpan.org/search?query=+Email%3A%3ASender%3A%3ATransport%3A&#38;mode=all" class="podlinkurl"
>Email::Sender::Transport</a></p>

<h2><a class='u'
name="send()"
>send()</a></h2>

<pre>        $email-&#62;send();</pre>

<p>Send the email with current settings. This method is called automatically by the method <code>email</code> to send the email.</p>

<h1><a class='u'
name="Bugs"
>Bugs</a></h1>

<p>This project is available on github at <a href="https://github.com/mewsoft/Nile" class="podlinkurl"
>https://github.com/mewsoft/Nile</a>.</p>

<h1><a class='u'
name="HOMEPAGE"
>HOMEPAGE</a></h1>

<p>Please visit the project&#39;s homepage at <a href="https://metacpan.org/release/Nile" class="podlinkurl"
>https://metacpan.org/release/Nile</a>.</p>

<h1><a class='u'
name="SOURCE"
>SOURCE</a></h1>

<p>Source repository is at <a href="https://github.com/mewsoft/Nile" class="podlinkurl"
>https://github.com/mewsoft/Nile</a>.</p>

<h1><a class='u'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p>See <a href="http://search.cpan.org/perldoc?Nile" class="podlinkpod"
>Nile</a> for details about the complete framework.</p>

<h1><a class='u'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Ahmed Amin Elsheshtawy, &#1575;&#1581;&#1605;&#1583; &#1575;&#1605;&#1610;&#1606; &#1575;&#1604;&#1588;&#1588;&#1578;&#1575;&#1608;&#1609; &#60;mewsoft@cpan.org&#62; Website: http://www.mewsoft.com</p>

<h1><a class='u'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>Copyright (C) 2014-2015 by Dr. Ahmed Amin Elsheshtawy &#1575;&#1581;&#1605;&#1583; &#1575;&#1605;&#1610;&#1606; &#1575;&#1604;&#1588;&#1588;&#1578;&#1575;&#1608;&#1609; mewsoft@cpan.org, support@mewsoft.com, <a href="https://github.com/mewsoft/Nile" class="podlinkurl"
>https://github.com/mewsoft/Nile</a>, <a href="http://www.mewsoft.com" class="podlinkurl"
>http://www.mewsoft.com</a></p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<!-- end doc -->

</body></html>
